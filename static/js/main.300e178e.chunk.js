(this["webpackJsonpmovies-app"]=this["webpackJsonpmovies-app"]||[]).push([[0],{70:function(e,t,r){},78:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(12),c=r.n(i),s=(r(70),r(105)),o=r(26),l=r(22),d=r.n(l),j=r(53),u=r(43),m=["Soul","Little Joe","Godzilla vs Kong","Nomadland","Never Rarely Sometimes Always","Joker","Avengers: Endgame","Mank","Collective","Beanpole","The Assistant","Wolfwalkers"],b=r(2),v={loading:!0,error:null,data:null},h=Object(n.createContext)({}),g=function(e){var t=e.children,r=Object(n.useState)(v),a=Object(o.a)(r,2),i=a[0],c=a[1],s=Object(n.useState)(null),l=Object(o.a)(s,2),g=l[0],p=l[1],x=Object(n.useCallback)(Object(u.a)(d.a.mark((function e(){var t,r,n,a,i,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t=[],r=Object(j.a)(m),e.prev=3,r.s();case 5:if((n=r.n()).done){e.next=16;break}return a=n.value,e.next=9,fetch("https://www.omdbapi.com/?apikey=99c57d3&t=".concat(a));case 9:return i=e.sent,e.next=12,i.json();case 12:s=e.sent,t.push(s);case 14:e.next=5;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),r.e(e.t0);case 21:return e.prev=21,r.f(),e.finish(21);case 24:c({loading:!1,error:null,data:t}),e.next=31;break;case 27:e.prev=27,e.t1=e.catch(0),console.log(e.t1),c({loading:!1,error:{type:"BackendError",description:"Something went wrong on our end. Try to refresh the page"},data:null});case 31:case"end":return e.stop()}}),e,null,[[0,27],[3,18,21,24]])}))),[]),O=function(){var e=Object(u.a)(d.a.mark((function e(t){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(v),e.prev=1,e.next=4,fetch("https://www.omdbapi.com/?apikey=99c57d3&s=".concat(t));case 4:return r=e.sent,e.next=7,r.json();case 7:if("True"!==(n=e.sent).Response){e.next=10;break}return e.abrupt("return",c({loading:!1,error:null,data:n.Search}));case 10:c({loading:!1,error:{type:"SearchError",description:"We couldn't find that movie. Rephrase the search term and try again"},data:null}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0),c({loading:!1,error:{type:"BackendError",description:"Something went wrong on our end. Try to refresh the page"},data:null});case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(u.a)(d.a.mark((function e(t){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://www.omdbapi.com/?apikey=99c57d3&i=".concat(t,"&plot=full"));case 3:return r=e.sent,e.next=6,r.json();case 6:if("True"!==(n=e.sent).Response){e.next=9;break}return e.abrupt("return",p({loading:!1,error:null,data:n}));case 9:p({loading:!1,error:{type:"SearchError",description:"We couldn't find that movie. Rephrase the search term and try again"},data:null}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),p({loading:!1,error:{type:"BackendError",description:"Something went wrong on our end. Try to refresh the page"},data:null});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)(h.Provider,{value:{movies:i,activeMovie:g,searchMovies:O,getSuggestedMovies:x,searchMovie:f,unsetActiveMovie:function(){return p(null)},setMovieLoading:function(){return p({loading:!0,error:null,data:null})}},children:t})};var p=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),r=t[0],a=t[1],i=Object(n.useState)(r),c=Object(o.a)(i,2),s=c[0],l=c[1],d=Object(n.useContext)(h).searchMovies;return Object(b.jsx)("form",{onSubmit:function(e){e.preventDefault(),r&&s!==r&&(d(r),l(r),a(""))},children:Object(b.jsx)("input",{value:r,onChange:function(e){var t=e.target;return a(t.value)},type:"text",className:"searchbox__input",placeholder:"E.g. Harry Potter"})})};var x=function(){return Object(b.jsx)("header",{className:"header",children:Object(b.jsxs)(s.a,{maxWidth:"lg",children:[Object(b.jsx)("h1",{children:"Find movies"}),Object(b.jsx)(p,{})]})})},O=r(41),f=r(107),_=r(108),y=r(109),N=r(110);function k(e){return"Plot"in e}var w=function(e){var t=Object(n.useContext)(h),r=t.searchMovie,a=t.setMovieLoading,i=k(e),c=e.imdbID,s=e.Poster,o=e.Title,l=e.Year,d=function(){a(),r(c)};return i?Object(b.jsx)(f.a,{item:!0,xs:6,sm:4,lg:3,className:"movie",onClick:d,children:Object(b.jsx)(_.a,{children:Object(b.jsx)("div",{className:"movie__img",children:Object(b.jsx)(y.a,{component:"img",alt:o,image:"N/A"===s?"/img/not-available.jpg":s,title:o})})})}):Object(b.jsx)(f.a,{item:!0,xs:12,sm:6,md:4,lg:3,className:"movie movie--with-content",onClick:d,children:Object(b.jsxs)(_.a,{children:[Object(b.jsx)("div",{className:"movie__img",children:Object(b.jsx)(y.a,{component:"img",alt:o,image:"N/A"===s?"/img/not-available.jpg":s,title:o})}),Object(b.jsxs)(N.a,{children:[Object(b.jsx)("h3",{className:"movie__title",children:o}),Object(b.jsxs)("p",{className:"movie__year",children:["(",l,")"]})]})]})})};var C=function(e){var t=e.movies;return Object(b.jsx)(f.a,{container:!0,spacing:3,children:null===t||void 0===t?void 0:t.map((function(e){return Object(b.jsx)(w,Object(O.a)({},e),e.imdbID)}))})},S=r(115),M=r(111);var T=function(){return Object(b.jsx)(S.a,{height:"100%",flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center",style:{gridColumn:"1 / -1"},children:Object(b.jsx)(M.a,{size:96,className:"progress-color"})})};var W=function(e){var t=e.type,r=e.title,n=void 0===r?"Oops...":r,a=e.description,i="BackendError"===t?"/find-movies-app/img/surprised.svg":"/find-movies-app/img/magnifying-glass.svg";return Object(b.jsx)(S.a,{height:"100%",flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center",children:Object(b.jsxs)("div",{className:"search-error",children:[Object(b.jsx)("img",{src:i,alt:n,className:"search-error__img"}),Object(b.jsx)("h3",{className:"search-error__title",children:n}),Object(b.jsx)("p",{children:a})]})})};var E=function(){var e=Object(n.useContext)(h),t=e.getSuggestedMovies,r=e.movies,a=!!r.data&&k(r.data[0]);return Object(n.useEffect)((function(){t()}),[t]),Object(b.jsx)("main",{children:Object(b.jsx)(s.a,{maxWidth:"lg",className:"container-center",children:r.loading?Object(b.jsx)(T,{}):r.error?Object(b.jsx)(W,{type:r.error.type,description:r.error.description}):Object(b.jsxs)("section",{children:[Object(b.jsx)("h2",{children:a?"You might like":"Search results"}),Object(b.jsx)(C,{movies:r.data})]})})})},F=r(116),R=r(117),D=r(113),P=r(112),A=r(44),B=r.n(A),I=r(54),L=r.n(I),G=Object(n.forwardRef)((function(e,t){return Object(b.jsx)(P.a,Object(O.a)({direction:"up",ref:t},e))}));var J=function(){var e=Object(n.useContext)(h),t=e.activeMovie,r=e.unsetActiveMovie;if(!t)return Object(b.jsx)(b.Fragment,{});var a=function(){return r()};if(t.loading)return Object(b.jsxs)(F.a,{fullWidth:!0,maxWidth:"lg",TransitionComponent:G,onClose:a,open:null!==t,"aria-labelledby":"Movie dialog",children:[Object(b.jsx)(D.a,{"aria-label":"Close Dialog",className:"movie-dialog__close",onClick:a,children:Object(b.jsx)(B.a,{})}),Object(b.jsx)("div",{className:"movie-dialog__grid movie-dialog__grid--center",children:Object(b.jsx)(T,{})})]});if(t.error)return Object(b.jsxs)(F.a,{fullWidth:!0,maxWidth:"lg",TransitionComponent:G,onClose:a,open:null!==t,"aria-labelledby":"Movie dialog",children:[Object(b.jsx)(D.a,{"aria-label":"Close Dialog",className:"movie-dialog__close",onClick:a,children:Object(b.jsx)(B.a,{})}),Object(b.jsx)("div",{className:"movie-dialog__grid movie-dialog__grid--center",children:Object(b.jsx)(W,{type:t.error.type,description:t.error.description})})]});if(!(null===t||void 0===t?void 0:t.data))return Object(b.jsx)(b.Fragment,{});var i=null===t||void 0===t?void 0:t.data,c=i.Title,s=i.Plot,o=i.Released,l=i.Poster,d=i.Genre,j=i.Ratings;return Object(b.jsxs)(F.a,{fullWidth:!0,maxWidth:"lg",TransitionComponent:G,onClose:a,open:null!==t,"aria-labelledby":"Movie dialog",children:[Object(b.jsx)(D.a,{"aria-label":"Close Dialog",className:"movie-dialog__close",onClick:a,children:Object(b.jsx)(B.a,{})}),Object(b.jsxs)("div",{className:"movie-dialog__grid",children:[Object(b.jsx)("img",{src:l,alt:c,className:"movie-dialog__media"}),Object(b.jsxs)("div",{className:"movie-dialog__top",children:[Object(b.jsx)("h1",{children:c}),Object(b.jsxs)("div",{className:"movie-dialog__meta",children:[Object(b.jsx)("span",{children:o}),Object(b.jsxs)("span",{children:[Object(b.jsx)(L.a,{style:{color:"#FFD560",marginRight:"0.4rem"}}),j[0].Value]})]})]}),Object(b.jsxs)("div",{className:"movie-dialog__main",children:[Object(b.jsx)("div",{className:"movie-dialog__genres",children:d.split(", ").map((function(e){return Object(b.jsx)(R.a,{variant:"outlined",label:e,className:"chip--genre"},e)}))}),Object(b.jsx)("div",{className:"movie__overview",children:Object(b.jsx)("p",{children:s})})]})]})]})};var z=function(){return Object(b.jsx)(g,{children:Object(b.jsxs)("div",{className:"app",children:[Object(b.jsx)(x,{}),Object(b.jsx)(E,{}),Object(b.jsx)(J,{})]})})},Y=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,119)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;r(e),n(e),a(e),i(e),c(e)}))};c.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(z,{})}),document.getElementById("root")),Y()}},[[78,1,2]]]);
//# sourceMappingURL=main.300e178e.chunk.js.map