(this["webpackJsonpmovies-app"]=this["webpackJsonpmovies-app"]||[]).push([[0],{70:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(12),c=n.n(i),s=(n(70),n(105)),o=n(26),l=n(22),d=n.n(l),j=n(53),u=n(43),m=["Soul","Little Joe","Godzilla vs Kong","Nomadland","Never Rarely Sometimes Always","Joker","Avengers: Endgame","Mank","Collective","Beanpole","The Assistant","Wolfwalkers"],v=n(2),b={loading:!0,error:null,data:null},h=Object(r.createContext)({}),p=function(e){var t=e.children,n=Object(r.useState)(b),a=Object(o.a)(n,2),i=a[0],c=a[1],s=Object(r.useState)(null),l=Object(o.a)(s,2),p=l[0],g=l[1],x=Object(r.useCallback)(Object(u.a)(d.a.mark((function e(){var t,n,r,a,i,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t=[],n=Object(j.a)(m),e.prev=3,n.s();case 5:if((r=n.n()).done){e.next=16;break}return a=r.value,e.next=9,fetch("https://www.omdbapi.com/?apikey=99c57d3&t=".concat(a));case 9:return i=e.sent,e.next=12,i.json();case 12:s=e.sent,t.push(s);case 14:e.next=5;break;case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),n.e(e.t0);case 21:return e.prev=21,n.f(),e.finish(21);case 24:c({loading:!1,error:null,data:t}),e.next=31;break;case 27:e.prev=27,e.t1=e.catch(0),console.log(e.t1),c({loading:!1,error:{type:"BackendError",description:"Something went wrong on our end. Try to refresh the page"},data:null});case 31:case"end":return e.stop()}}),e,null,[[0,27],[3,18,21,24]])}))),[]),O=Object(r.useCallback)(function(){var e=Object(u.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(b),e.prev=1,e.next=4,fetch("https://www.omdbapi.com/?apikey=99c57d3&s=".concat(t));case 4:return n=e.sent,e.next=7,n.json();case 7:if("True"!==(r=e.sent).Response){e.next=10;break}return e.abrupt("return",c({loading:!1,error:null,data:r.Search}));case 10:c({loading:!1,error:{type:"SearchError",description:"We couldn't find that movie. Rephrase the search term and try again"},data:null}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0),c({loading:!1,error:{type:"BackendError",description:"Something went wrong on our end. Try to refresh the page"},data:null});case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),[]),f=function(){var e=Object(u.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://www.omdbapi.com/?apikey=99c57d3&i=".concat(t,"&plot=full"));case 3:return n=e.sent,e.next=6,n.json();case 6:if("True"!==(r=e.sent).Response){e.next=9;break}return e.abrupt("return",g({loading:!1,error:null,data:r}));case 9:g({loading:!1,error:{type:"SearchError",description:"We couldn't find that movie. Rephrase the search term and try again"},data:null}),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0),g({loading:!1,error:{type:"BackendError",description:"Something went wrong on our end. Try to refresh the page"},data:null});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsx)(h.Provider,{value:{movies:i,activeMovie:p,searchMovies:O,getSuggestedMovies:x,searchMovie:f,unsetActiveMovie:function(){return g(null)},setMovieLoading:function(){return g({loading:!0,error:null,data:null})}},children:t})};var g=function(){var e=Object(r.useContext)(h).searchMovies,t=Object(r.useState)(""),n=Object(o.a)(t,2),a=n[0],i=n[1],c=Object(r.useState)(a),s=Object(o.a)(c,2),l=s[0],d=s[1],j=Object(r.useRef)();return Object(r.useEffect)((function(){clearTimeout(j.current),!a.trim()||a.trim().length<3||(j.current=window.setTimeout((function(){d(a),e(a)}),500))}),[a,e]),Object(v.jsx)("form",{onSubmit:function(t){t.preventDefault(),a&&l!==a&&(e(a),d(a),i(""))},children:Object(v.jsx)("input",{value:a,onChange:function(e){var t=e.target;return i(t.value)},type:"text",className:"searchbox__input",placeholder:"E.g. Harry Potter"})})};var x=function(){return Object(v.jsx)("header",{className:"header",children:Object(v.jsxs)(s.a,{maxWidth:"lg",children:[Object(v.jsx)("h1",{children:"Find movies"}),Object(v.jsx)(g,{})]})})},O=n(41),f=n(107),_=n(108),y=n(109),w=n(110);function N(e){return"Plot"in e}var k=function(e){var t=Object(r.useContext)(h),n=t.searchMovie,a=t.setMovieLoading,i=N(e),c=e.imdbID,s=e.Poster,o=e.Title,l=e.Year,d=function(){a(),n(c)};return i?Object(v.jsx)(f.a,{item:!0,xs:6,sm:4,lg:3,className:"movie",onClick:d,children:Object(v.jsx)(_.a,{children:Object(v.jsx)("div",{className:"movie__img",children:Object(v.jsx)(y.a,{component:"img",alt:o,image:"N/A"===s?"/find-movies-app/img/not-available.jpg":s,title:o})})})}):Object(v.jsx)(f.a,{item:!0,xs:12,sm:6,md:4,lg:3,className:"movie movie--with-content",onClick:d,children:Object(v.jsxs)(_.a,{children:[Object(v.jsx)("div",{className:"movie__img",children:Object(v.jsx)(y.a,{component:"img",alt:o,image:"N/A"===s?"/find-movies-app/img/not-available.jpg":s,title:o})}),Object(v.jsxs)(w.a,{children:[Object(v.jsx)("h3",{className:"movie__title",children:o}),Object(v.jsxs)("p",{className:"movie__year",children:["(",l,")"]})]})]})})};var C=function(e){var t=e.movies;return Object(v.jsx)(f.a,{container:!0,spacing:3,children:null===t||void 0===t?void 0:t.map((function(e){return Object(v.jsx)(k,Object(O.a)({},e),e.imdbID)}))})},S=n(115),M=n(111);var T=function(){return Object(v.jsx)(S.a,{height:"100%",flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center",style:{gridColumn:"1 / -1"},children:Object(v.jsx)(M.a,{size:96,className:"progress-color"})})};var E=function(e){var t=e.type,n=e.title,r=void 0===n?"Oops...":n,a=e.description,i="BackendError"===t?"/find-movies-app/img/surprised.svg":"/find-movies-app/img/magnifying-glass.svg";return Object(v.jsx)(S.a,{height:"100%",flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center",children:Object(v.jsxs)("div",{className:"search-error",children:[Object(v.jsx)("img",{src:i,alt:r,className:"search-error__img"}),Object(v.jsx)("h3",{className:"search-error__title",children:r}),Object(v.jsx)("p",{children:a})]})})};var W=function(){var e=Object(r.useContext)(h),t=e.getSuggestedMovies,n=e.movies,a=!!n.data&&N(n.data[0]);return Object(r.useEffect)((function(){t()}),[t]),Object(v.jsx)("main",{children:Object(v.jsx)(s.a,{maxWidth:"lg",className:"container-center",children:n.loading?Object(v.jsx)(T,{}):n.error?Object(v.jsx)(E,{type:n.error.type,description:n.error.description}):Object(v.jsxs)("section",{children:[Object(v.jsx)("h2",{children:a?"You might like":"Search results"}),Object(v.jsx)(C,{movies:n.data})]})})})},R=n(116),F=n(117),A=n(113),D=n(112),P=n(44),B=n.n(P),I=n(54),L=n.n(I),G=Object(r.forwardRef)((function(e,t){return Object(v.jsx)(D.a,Object(O.a)({direction:"up",ref:t},e))}));var J=function(){var e,t=Object(r.useContext)(h),n=t.activeMovie,a=t.unsetActiveMovie;if(!n)return Object(v.jsx)(v.Fragment,{});var i=function(){return a()};if(n.loading)return Object(v.jsxs)(R.a,{fullWidth:!0,maxWidth:"lg",TransitionComponent:G,onClose:i,open:null!==n,"aria-labelledby":"Movie dialog",children:[Object(v.jsx)(A.a,{"aria-label":"Close Dialog",className:"movie-dialog__close",onClick:i,children:Object(v.jsx)(B.a,{})}),Object(v.jsx)("div",{className:"movie-dialog__grid movie-dialog__grid--center",children:Object(v.jsx)(T,{})})]});if(n.error)return Object(v.jsxs)(R.a,{fullWidth:!0,maxWidth:"lg",TransitionComponent:G,onClose:i,open:null!==n,"aria-labelledby":"Movie dialog",children:[Object(v.jsx)(A.a,{"aria-label":"Close Dialog",className:"movie-dialog__close",onClick:i,children:Object(v.jsx)(B.a,{})}),Object(v.jsx)("div",{className:"movie-dialog__grid movie-dialog__grid--center",children:Object(v.jsx)(E,{type:n.error.type,description:n.error.description})})]});if(!(null===n||void 0===n?void 0:n.data))return Object(v.jsx)(v.Fragment,{});var c=null===n||void 0===n?void 0:n.data,s=c.Title,o=c.Plot,l=c.Released,d=c.Poster,j=c.Genre,u=c.Ratings;return Object(v.jsxs)(R.a,{fullWidth:!0,maxWidth:"lg",TransitionComponent:G,onClose:i,open:null!==n,"aria-labelledby":"Movie dialog",children:[Object(v.jsx)(A.a,{"aria-label":"Close Dialog",className:"movie-dialog__close",onClick:i,children:Object(v.jsx)(B.a,{})}),Object(v.jsxs)("div",{className:"movie-dialog__grid",children:[Object(v.jsx)("img",{src:"N/A"===d?"/find-movies-app/img/not-available.jpg":d,alt:s,className:"movie-dialog__media"}),Object(v.jsxs)("div",{className:"movie-dialog__top",children:[Object(v.jsx)("h1",{children:s}),Object(v.jsxs)("div",{className:"movie-dialog__meta",children:[Object(v.jsx)("span",{children:l}),u.length>0&&Object(v.jsxs)("span",{children:[Object(v.jsx)(L.a,{style:{color:"#FFD560",marginRight:"0.4rem"}}),null===(e=u[0])||void 0===e?void 0:e.Value]})]})]}),Object(v.jsxs)("div",{className:"movie-dialog__main",children:[Object(v.jsx)("div",{className:"movie-dialog__genres",children:j.split(", ").map((function(e){return Object(v.jsx)(F.a,{variant:"outlined",label:e,className:"chip--genre"},e)}))}),Object(v.jsx)("div",{className:"movie__overview",children:Object(v.jsx)("p",{children:o})})]})]})]})};var z=function(){return Object(v.jsx)(p,{children:Object(v.jsxs)("div",{className:"app",children:[Object(v.jsx)(x,{}),Object(v.jsx)(W,{}),Object(v.jsx)(J,{})]})})},Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,119)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};c.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(z,{})}),document.getElementById("root")),Y()}},[[78,1,2]]]);
//# sourceMappingURL=main.e6df2848.chunk.js.map